/*
 * Copyright 2017-2018 NXP
 * All rights reserved.
 *
 * SPDX-License-Identifier: BSD-3-Clause
 */
  
#include <string.h>
#include "ov7670.h"
#include "fsl_lpi2c.h"
#include "fsl_lpflexcomm.h"
#include "rtthread.h"
/*******************************************************************************
 * Definitions
 ******************************************************************************/
/* I2C for the touch. */
#define CAMERA_I2C                       LPI2C0
#define CAMERA_FLEXCOMM                  LPFLEXCOMM0
#define CAMERA_I2C_CLOCK_FREQ            CLOCK_GetBusClkFreq()
#define CAMERA_I2C_BAUDRATE              (100*1000)

//#define OV7670_QVGA_RGB_0     /*camera resolution define*/
//#define OV7670_VGA_RGB     /*camera resolution define*/
#define OV7675_VGA_RGB     /*camera resolution define*/
/*******************************************************************************
 * Variables
 ******************************************************************************/
uint8_t g_master_rxBuff[2];

static  uint8_t hm0360_init_regtbl[][3]={
		{0x01,0x03,0x00},
		{0x03,0x00,0x0C},
		{0x03,0x02,0xF8},
		{0x03,0x50,0xE0},
		{0x03,0x70,0x01},
		{0x03,0x71,0x01},
		{0x03,0x72,0x00},
		{0x10,0x00,0x43},
		{0x10,0x01,0x80},
		{0x10,0x03,0x20},
		{0x10,0x04,0x20},
		{0x10,0x07,0x01},
		{0x10,0x08,0x20},
		{0x10,0x09,0x20},
		{0x10,0x0A,0x07},
		{0x10,0x0B,0x20},
		{0x10,0x0C,0x20},
		{0x10,0x13,0x00},
		{0x10,0x14,(1<<3)|(1<<1)|(1<<0)},//VSYNC shift
		{0x10,0x18,0x00},
		{0x10,0x1D,0xCF},
		{0x10,0x1E,0x01},
		{0x10,0x1F,0x00},
		{0x10,0x20,0x01},
		{0x10,0x21,0x5D},
		{0x10,0x2F,0x08},
		{0x10,0x30,0x09},
		{0x10,0x31,0x12},
		{0x10,0x32,0x23},
		{0x10,0x33,0x31},
		{0x10,0x34,0x3E},
		{0x10,0x35,0x4B},
		{0x10,0x36,0x56},
		{0x10,0x37,0x5E},
		{0x10,0x38,0x65},
		{0x10,0x39,0x72},
		{0x10,0x3A,0x7F},
		{0x10,0x3B,0x8C},
		{0x10,0x3C,0x98},
		{0x10,0x3D,0xB2},
		{0x10,0x3E,0xCC},
		{0x10,0x3F,0xE6},
		{0x10,0x41,0x00},
		{0x20,0x00,0x7F},
		{0x20,0x2B,0x04},
		{0x20,0x2C,0x03},
		{0x20,0x2D,0x00},
		{0x20,0x31,0x60},
		{0x20,0x32,0x08},
		{0x20,0x36,0x19},
		{0x20,0x37,0x08},
		{0x20,0x38,0x10},
		{0x20,0x3C,0x01},
		{0x20,0x3D,0x04},
		{0x20,0x3E,0x01},
		{0x20,0x3F,0x38},
		{0x20,0x48,0x00},
		{0x20,0x49,0x10},
		{0x20,0x4A,0x40},
		{0x20,0x4B,0x00},
		{0x20,0x4C,0x08},
		{0x20,0x4D,0x20},
		{0x20,0x4E,0x00},
		{0x20,0x4F,0x38},
		{0x20,0x50,0xE0},
		{0x20,0x51,0x00},
		{0x20,0x52,0x1C},
		{0x20,0x53,0x70},
		{0x20,0x54,0x00},
		{0x20,0x55,0x1A},
		{0x20,0x56,0xC0},
		{0x20,0x57,0x00},
		{0x20,0x58,0x06},
		{0x20,0x59,0xB0},
		{0x20,0x61,0x00},
		{0x20,0x62,0x00},
		{0x20,0x63,0xC8},
		{0x20,0x80,0x41},
		{0x20,0x81,0xE0},
		{0x20,0x82,0xF0},
		{0x20,0x83,0x01},
		{0x20,0x84,0x10},
		{0x20,0x85,0x10},
		{0x20,0x86,0x01},
		{0x20,0x87,0x06},
		{0x20,0x88,0x0C},
		{0x20,0x89,0x12},
		{0x20,0x8A,0x1C},
		{0x20,0x8B,0x30},
		{0x20,0x8C,0x10},
		{0x20,0x8D,0x02},
		{0x20,0x8E,0x08},
		{0x20,0x8F,0x0D},
		{0x20,0x90,0x14},
		{0x20,0x91,0x1D},
		{0x20,0x92,0x30},
		{0x20,0x93,0x08},
		{0x20,0x94,0x0A},
		{0x20,0x95,0x0F},
		{0x20,0x96,0x14},
		{0x20,0x97,0x18},
		{0x20,0x98,0x20},
		{0x20,0x99,0x10},
		{0x20,0x9A,0x00},
		{0x20,0x9B,0x01},
		{0x20,0x9C,0x01},
		{0x20,0x9D,0x11},
		{0x20,0x9E,0x06},
		{0x20,0x9F,0x20},
		{0x20,0xA0,0x10},
		{0x25,0x90,0x01},
		{0x28,0x00,0x00},
		{0x28,0x04,0x02},
		{0x28,0x05,0x03},
		{0x28,0x06,0x03},
		{0x28,0x07,0x08},
		{0x28,0x08,0x04},
		{0x28,0x09,0x0C},
		{0x28,0x0A,0x03},
		{0x28,0x0F,0x03},
		{0x28,0x10,0x03},
		{0x28,0x11,0x00},
		{0x28,0x12,0x09},
		{0x28,0x21,0xDE},
		{0x28,0x2A,0x0F},
		{0x28,0x2B,0x08},
		{0x28,0x2E,0x2F},
		{0x30,0x10,0x00},
		{0x30,0x13,0x01},
		{0x30,0x19,0x00},
		{0x30,0x1A,0x00},
		{0x30,0x1B,0x20},
		{0x30,0x1C,0xFF},
		{0x30,0x20,0x00},
		{0x30,0x21,0x00},
		{0x30,0x24,0x00},
		{0x30,0x25,0x12},
		{0x30,0x26,0x03},
		{0x30,0x27,0x81},
		{0x30,0x28,0x01},
		{0x30,0x29,0x00},
		{0x30,0x2A,0x30},
		{0x30,0x2B,0x2A},
		{0x30,0x2C,0x00},
		{0x30,0x2D,0x03},
		{0x30,0x2E,0x00},
		{0x30,0x2F,0x00},
		{0x30,0x31,0x01},
		{0x30,0x34,0x00},
		{0x30,0x35,0x01},
		{0x30,0x51,0x00},
		{0x30,0x5C,0x03},
		{0x30,0x60,0x00},
		{0x30,0x61,0xFA},
		{0x30,0x62,0xFF},
		{0x30,0x63,0xFF},
		{0x30,0x64,0xFF},
		{0x30,0x65,0xFF},
		{0x30,0x66,0xFF},
		{0x30,0x67,0xFF},
		{0x30,0x68,0xFF},
		{0x30,0x69,0xFF},
		{0x30,0x6A,0xFF},
		{0x30,0x6B,0xFF},
		{0x30,0x6C,0xFF},
		{0x30,0x6D,0xFF},
		{0x30,0x6E,0xFF},
		{0x30,0x6F,0xFF},
		{0x30,0x70,0xFF},
		{0x30,0x71,0xFF},
		{0x30,0x72,0xFF},
		{0x30,0x73,0xFF},
		{0x30,0x74,0xFF},
		{0x30,0x75,0xFF},
		{0x30,0x76,0xFF},
		{0x30,0x77,0xFF},
		{0x30,0x78,0xFF},
		{0x30,0x79,0xFF},
		{0x30,0x7A,0xFF},
		{0x30,0x7B,0xFF},
		{0x30,0x7C,0xFF},
		{0x30,0x7D,0xFF},
		{0x30,0x7E,0xFF},
		{0x30,0x7F,0xFF},
		{0x30,0x80,0x00},
		{0x30,0x81,0x00},
		{0x30,0x82,0x00},
		{0x30,0x83,0x20},
		{0x30,0x84,0x00},
		{0x30,0x85,0x20},
		{0x30,0x86,0x00},
		{0x30,0x87,0x20},
		{0x30,0x88,0x00},
		{0x30,0x89,0x04},
		{0x30,0x94,0x02},
		{0x30,0x95,0x02},
		{0x30,0x96,0x00},
		{0x30,0x97,0x02},
		{0x30,0x98,0x00},
		{0x30,0x99,0x02},
		{0x30,0x9E,0x02},//pclk_gated_en
		{0x30,0x9F,0x02},
		{0x30,0xA0,0x00},
		{0x30,0xA1,0x00},//pclk0_line_front_h
		{0x30,0xA2,0x00},//pclk0_line_front_l
		{0x30,0xA3,0x00},//pclk0_line_end_h
		{0x30,0xA4,0x00},//pclk0_line_end_l
		{0x30,0xA5,0x04},
		{0x30,0xA6,0x02},
		{0x30,0xA7,0x02},
		{0x30,0xA8,0x01},
		{0x30,0xA9,0x00},
		{0x30,0xAA,0x02},
		{0x30,0xAB,0x34},
		{0x30,0xB0,0x03},
		{0x30,0xC4,0x10},
		{0x30,0xC5,0x01},
		{0x30,0xC6,0xBF},
		{0x30,0xC7,0x00},
		{0x30,0xC8,0x00},
		{0x30,0xCB,0xFF},
		{0x30,0xCC,0xFF},
		{0x30,0xCD,0x7F},
		{0x30,0xCE,0x7F},
		{0x30,0xD3,0x01},
		{0x30,0xD4,0xFF},
		{0x30,0xD5,0x00},
		{0x30,0xD6,0x40},
		{0x30,0xD7,0x00},
		{0x30,0xD8,0xA7},
		{0x30,0xD9,0x05},
		{0x30,0xDA,0x01},
		{0x30,0xDB,0x40},
		{0x30,0xDC,0x00},
		{0x30,0xDD,0x27},
		{0x30,0xDE,0x05},
		{0x30,0xDF,0x07},
		{0x30,0xE0,0x40},
		{0x30,0xE1,0x00},
		{0x30,0xE2,0x27},
		{0x30,0xE3,0x05},
		{0x30,0xE4,0x47},
		{0x30,0xE5,0x30},
		{0x30,0xE6,0x00},
		{0x30,0xE7,0x27},
		{0x30,0xE8,0x05},
		{0x30,0xE9,0x87},
		{0x30,0xEA,0x30},
		{0x30,0xEB,0x00},
		{0x30,0xEC,0x27},
		{0x30,0xED,0x05},
		{0x30,0xEE,0x00},
		{0x30,0xEF,0x40},
		{0x30,0xF0,0x00},
		{0x30,0xF1,0xA7},
		{0x30,0xF2,0x05},
		{0x30,0xF3,0x01},
		{0x30,0xF4,0x40},
		{0x30,0xF5,0x00},
		{0x30,0xF6,0x27},
		{0x30,0xF7,0x05},
		{0x30,0xF8,0x07},
		{0x30,0xF9,0x40},
		{0x30,0xFA,0x00},
		{0x30,0xFB,0x27},
		{0x30,0xFC,0x05},
		{0x30,0xFD,0x47},
		{0x30,0xFE,0x30},
		{0x30,0xFF,0x00},
		{0x31,0x00,0x27},
		{0x31,0x01,0x05},
		{0x31,0x02,0x87},
		{0x31,0x03,0x30},
		{0x31,0x04,0x00},
		{0x31,0x05,0x27},
		{0x31,0x06,0x05},
		{0x31,0x0B,0x10},
        
        //{0x31,0x0F,(0<<7)},           /* 8bit mode */
        
		{0x31,0x0F,(1<<6)},             /* 4bit mode  (1<<6):4bit, (1<<7):1bir (0) 8bit */

		{0x31,0x12,(1<<3)},             //pclk0_polarity, MSB or LSB 
		{0x31,0x13,0xA0},
		{0x31,0x14,0x67},
		{0x31,0x15,0x42},
		{0x31,0x16,0x10},
		{0x31,0x17,0x0A},
		{0x31,0x18,0x3F},
		{0x31,0x1C,0x10},
		{0x31,0x1D,0x06},
		{0x31,0x1E,0x0F},
		{0x31,0x1F,0x0E},
		{0x31,0x20,0x0D},
		{0x31,0x21,0x0F},
		{0x31,0x22,0x00},
		{0x31,0x23,0x1D},
		{0x31,0x26,0x03},
		{0x31,0x28,0x57},
		{0x31,0x2A,0x11},
		{0x31,0x2B,0x41},
		{0x31,0x2E,0x00},
		{0x31,0x2F,0x00},
		{0x31,0x30,0x0C},
		{0x31,0x41,0x2A},
		{0x31,0x42,0x9F},
		{0x31,0x47,0x18},
		{0x31,0x49,0x18},
		{0x31,0x4B,0x01},
		{0x31,0x50,0x50},
		{0x31,0x52,0x00},
		{0x31,0x56,0x2C},
		{0x31,0x5A,0x0A},
		{0x31,0x5B,0x2F},
		{0x31,0x5C,0xE0},
		{0x31,0x5F,0x02},
		{0x31,0x60,0x1F},
		{0x31,0x63,0x1F},
		{0x31,0x64,0x7F},
		{0x31,0x65,0x7F},
		{0x31,0x7B,0x94},
		{0x31,0x7C,0x00},
		{0x31,0x7D,0x02},
		{0x31,0x8C,0x00},
        
		{0x35,0x00,((1<<0) | (1<<2))},   //CLK_TB divider 10.24 Contet swtich A registers
      //  {0x35,0x00,0x0A}, 
  
		{0x35,0x01,0x0A},
		{0x35,0x02,0x77},
		{0x35,0x03,0x02},
		{0x35,0x04,0x14},
		{0x35,0x05,0x03},
		{0x35,0x06,0x00},
		{0x35,0x07,0x01},       //horizontal 0:full, 1:sub2, 2:sub4  0:640x480, 1:320x240, 2:160x120
		{0x35,0x08,0x01},       //vertical   0:full, 1:sub2, 2:sub4
		{0x35,0x09,0x00},// binning operation
		{0x35,0x0A,0xFF},
		{0x35,0x0B,0x01},
		{0x35,0x0C,0x00},
		{0x35,0x0D,0x01},
		{0x35,0x0F,0x00},
		{0x35,0x10,0x01},
		{0x35,0x12,0x7F},
		{0x35,0x13,0x00},
		{0x35,0x14,0x00},
		{0x35,0x15,0x01},
		{0x35,0x16,0x00},
		{0x35,0x17,0x02},
		{0x35,0x18,0x00},
		{0x35,0x19,0x7F},
		{0x35,0x1A,0x00},
		{0x35,0x1B,0x5F},
		{0x35,0x1C,0x00},
		{0x35,0x1D,0x04},
		{0x35,0x1E,0x24},
		{0x35,0x1F,0x04},
		{0x35,0x20,0x03},
		{0x35,0x21,0x00},
		{0x35,0x23,0x60},
		{0x35,0x24,0x08},
		{0x35,0x25,0x19},
		{0x35,0x26,0x08},
		{0x35,0x27,0x10},
		{0x35,0x2A,0x01},
		{0x35,0x2B,0x04},
		{0x35,0x2C,0x01},
		{0x35,0x2D,0x38},
		{0x35,0x35,0x02},
		{0x35,0x36,0x03},
		{0x35,0x37,0x03},
		{0x35,0x38,0x08},
		{0x35,0x39,0x04},
		{0x35,0x3A,0x0C},
		{0x35,0x3B,0x03},
		{0x35,0x40,0x03},
		{0x35,0x41,0x03},
		{0x35,0x42,0x00},
		{0x35,0x43,0x09},
		{0x35,0x49,0x04},
		{0x35,0x4A,0x35},
		{0x35,0x4B,0x21},
		{0x35,0x4C,0x01},
		{0x35,0x4D,0xE0},
		{0x35,0x4E,0xF0},
		{0x35,0x4F,0x10},
		{0x35,0x50,0x10},
		{0x35,0x51,0x10},
		{0x35,0x52,0x20},
		{0x35,0x53,0x10},
		{0x35,0x54,0x01},
		{0x35,0x55,0x06},
		{0x35,0x56,0x0C},
		{0x35,0x57,0x12},
		{0x35,0x58,0x1C},
		{0x35,0x59,0x30},
		//{0x35,0x5A,0x74},
		{0x35,0x5A,0x78},
		{0x35,0x5B,0x0A},
		{0x35,0x5C,0x77},
		{0x35,0x5D,0x01},
		{0x35,0x5E,0x1C},
		{0x35,0x5F,0x03},
		{0x35,0x60,0x00},
		{0x35,0x61,0x01},
		{0x35,0x62,0x01},
		{0x35,0x63,0x03},
		{0x35,0x64,0x55},
		{0x35,0x65,0x01},
		{0x35,0x66,0x00},
		{0x35,0x67,0x01},
		{0x35,0x69,0x00},
		{0x35,0x6A,0x01},
		{0x35,0x6C,0x7F},
		{0x35,0x6D,0x00},
		{0x35,0x6E,0x00},
		{0x35,0x6F,0x01},
		{0x35,0x70,0x00},
		{0x35,0x71,0x02},
		{0x35,0x72,0x00},
		{0x35,0x73,0x3F},
		{0x35,0x74,0x00},
		{0x35,0x75,0x2F},
		{0x35,0x76,0x00},
		{0x35,0x77,0x04},
		{0x35,0x78,0x24},
		{0x35,0x79,0x04},
		{0x35,0x7A,0x03},
		{0x35,0x7B,0x00},
		{0x35,0x7D,0x60},
		{0x35,0x7E,0x08},
		{0x35,0x7F,0x19},
		{0x35,0x80,0x08},
		{0x35,0x81,0x10},
		{0x35,0x84,0x01},
		{0x35,0x85,0x04},
		{0x35,0x86,0x01},
		{0x35,0x87,0x38},
		{0x35,0x88,0x02},
		{0x35,0x89,0x12},
		{0x35,0x8A,0x04},
		{0x35,0x8B,0x24},
		{0x35,0x8C,0x06},
		{0x35,0x8D,0x36},
		{0x35,0x8F,0x02},
		{0x35,0x90,0x03},
		{0x35,0x91,0x03},
		{0x35,0x92,0x08},
		{0x35,0x93,0x04},
		{0x35,0x94,0x0C},
		{0x35,0x95,0x03},
		{0x35,0x9A,0x03},
		{0x35,0x9B,0x03},
		{0x35,0x9C,0x00},
		{0x35,0x9D,0x09},
		{0x35,0xA3,0x02},
		{0x35,0xA4,0x03},
		{0x35,0xA5,0x21},
		{0x35,0xA6,0x01},
		{0x35,0xA7,0xE0},
		{0x35,0xA8,0xF0},
		{0x35,0xA9,0x10},
		{0x35,0xAA,0x10},
		{0x35,0xAB,0x10},
		{0x35,0xAC,0x20},
		{0x35,0xAD,0x10},
		{0x35,0xAE,0x01},
		{0x35,0xAF,0x06},
		{0x35,0xB0,0x0C},
		{0x35,0xB1,0x12},
		{0x35,0xB2,0x1C},
		{0x35,0xB3,0x30},
		{0x35,0xB4,0x74},
		{0x35,0xB5,0x0A},
		{0x35,0xB6,0x77},
		{0x35,0xB7,0x00},
		{0x35,0xB8,0x94},
		{0x35,0xB9,0x03},
		{0x35,0xBA,0x00},
		{0x35,0xBB,0x03},
		{0x35,0xBC,0x03},
		{0x35,0xBD,0x03},
		{0x35,0xBE,0x01},
		{0x35,0xBF,0x01},
		{0x35,0xC0,0x01},
		{0x35,0xC1,0x01},
		{0x35,0xC3,0x00},
		{0x35,0xC4,0x00},
		{0x35,0xC6,0x7F},
		{0x35,0xC7,0x00},
		{0x35,0xC8,0x00},
		{0x35,0xC9,0x01},
		{0x35,0xCA,0x00},
		{0x35,0xCB,0x02},
		{0x35,0xCC,0x00},
		{0x35,0xCD,0x0F},
		{0x35,0xCE,0x00},
		{0x35,0xCF,0x0B},
		{0x35,0xD0,0x00},
		{0x35,0xD3,0x04},
		{0x35,0xD7,0x18},
		{0x35,0xD8,0x01},
		{0x35,0xD9,0x20},
		{0x35,0xDA,0x08},
		{0x35,0xDB,0x14},
		{0x35,0xDC,0x70},
		{0x35,0xDE,0x00},
		{0x35,0xDF,0x01},
		{0x35,0xE9,0x02},
		{0x35,0xEA,0x03},
		{0x35,0xEB,0x03},
		{0x35,0xEC,0x08},
		{0x35,0xED,0x04},
		{0x35,0xEE,0x0C},
		{0x35,0xEF,0x03},
		{0x35,0xF4,0x03},
		{0x35,0xF5,0x03},
		{0x35,0xF6,0x00},
		{0x35,0xF7,0x09},
		{0x35,0xFD,0x00},
		{0x35,0xFE,0x5E},
		{0x01,0x04,0x01},
		{0x01,0x00,0x01},
};

static  uint8_t ov7670_init_regtbl[][2]=
{
#ifdef	OV7675_VGA_RGB
		{0x11,0x80},
		{0x3a,0x4},
		{0x12,0x0},
		{0x17,0x13},
		{0x18,0x1},
		{0x32,0xb6},
		{0x19,63},
		{0x1a,0x7b},
		{0x03,0x01},
		{0xc,0x0},
		{0x3e,0x0},
		{0x70,0x3a},
		{0x71,0x35},
		{0x72,0x11},
		{0x73,0xf0},
		{0xa2,0x2 },
		{0x15,0x30},//{0x15,0x20},//{0x15,0x0},
		{0x7a,0x18},
		{0x7b,0x4},
		{0x7c,0x9},
		{0x7d,0x18},


		{0x7e,0x38 },
		{0x7f,0x47},
		{0x80,0x56},
		{0x81,0x66},
		{0x82,0x74},
		{0x83,0x7f},
		{0x84,0x89},
		{0x85,0x9a},
		{0x86,0xa9},
		{0x87,0xc4},
		{0x88,0xdb},
		{0x89,0xee},
		{0x13,0xe0},
		{0x1,0x50},
		{0x2,0x68},
		{0x0,0x0 },
		{0x10,0x0},
		{0xd,0x40},
		{0x14,0x48},
		{0x15,0x30},//{0x15,0x20},//{0x15,0x07},
		{0xab,0x8},


		{0x24,0x60},
		{0x25,0x50},
		{0x26,0xe3},
		{0x9f,0x78},
		{0xa0,0x68},
		{0xa1,0x3},
		{0xa6,0xd8},
		{0xa7,0xd8},
		{0xa8,0xf0},
		{0xa9,0x90},
		{0xaa,0x14 },
		{0x13,0xe5 },
		{0xe,0x61},
		{0xf,0x4b },
		{0x16,0x2},
		{0x1e,0x37 },//{0x1e,0x27 },
		{0x21,0x2},
		{0x22,0x91},
		{0x29,0x07},
		{0x33,0xb},
		{0x35,0xb},


		{0x37,0x1d},
		{0x38,0x71},
		{0x39,0x2a},
		{0x3c,0x78},
		{0x4d,0x40},
		{0x4e,0x20},
		{0x69,0x0},
		{ 0x4e,0x20},
		{0x74,0x10},
		{0x8d,0x4f },
		{0x8e,0x0},
		{0x8f,0x0 },
		{0x90,0x0 },
		{0x91,0x0 },
		{0x92,0x66},
		{0x96,0x0},
		{0x9a,0x80},
		{0xb0,0x84},
		{0xb1,0xc},
		{0xb2,0xe},
		{0xb3,0x82},

		{0xb8,0x0a},
		{0x43,0x14},
		{0x44,0xf0},
		{0x45,0x41},
		{0x46,0x66},
		{0x47,0x2a},
		{0x48,0x3e},
		{0x59,0x8d},
		{0x5a,0x8e},
		{0x5b,0x53},
		{0x5c,0x83},
		{0x5d,0x4f},
		{0x5e,0xe},
		{0x6c,0x0a},
		{0x6d,0x55},
		{0x6e,0x11},
		{0x6f,0x9e},
		{0x62,0x90},
		{0x63,0x30},
		{0x64,0x11},
		{0x65,0x0},

		{0x66,0x5},
		{0x94,0x11},
		{0x95,0x18},
		{0x6a,0x40},
		{0x1,0x40 },
		{0x2,0x40},
		{0x13,0xe7},
		{0x4f,0x80},
		{0x50,0x80},
		{0x51,0x0},
		{0x52,0x22},
		{0x53,0x5e},
		{0x54,0x80},
		{0x58,0x9e},
		{0x41,0x8},
		{0x3f,0x0},
		{0x75,0x3},
		{0x76,0xe1},
		{0x4c,0x0},
		{0x77,0x0},
		{0x3d,0xc2},


		{0x4b,0x9},
		{0xc9,0x60},
		{0x41,0x38},
		{0x56,0x3a},
		{0x34,0x11},
		{0x3b,0x0a},
		{0xa4,0x88},
		{0x96,0x0},
		{0x97,0x30},
		{0x98,0x20},
		{0x99,0x30},
		{0x9a,0x8},
		{0x9b,0x29},
		{0x9c,0x3},
		{0x9d,0x98},
		{0x9e,0x3f},
		{0x78,0x4},
		{0x79,0x1},
		{0xc8,0xf0},
		{0x79,0xf},
		{0xc8,0x0},

		{0x79,0x10},
		{0xc8,0x7e},
		{0x79,0x0a},
		{0xc8,0x80},
		{0x79,0xb },
		{0xc8,0x1},
		{0x79,0xc},
		{0xc8,0xf},
		{0x79,0xd},
		{0xc8,0x20},
		{0x79,0x9},
		{0xc8,0x80},
		{0x79,0x2},
		{0xc8,0xc0},
		{0x79,0x3},
		{0xc8,0x40},
		{0x79,0x5},
		{0xc8,0x30},
		{0x79,0x26},
		{0x2d,0x0},
		{0x2e,0x0},


		{0x11,0x01},
		{0x6b,0x4a},
		{0x2a,0x0},
		{0x2b,0x0},
		{0x2d,0x0},
		{0x2e,0x0 },
		{0xca,0x0},
		{0x92,0x66},
		{0x93,0x0},
		{0x3b,0x0a},
		{0xcf,0x8c},
		{0x9d,0x98},
		{0x9e,0x7f},
		{0xa5,0x2},
		{0xab,0x3},
		{0x15,0x30},//{0x15,0x20},//{0x15,0x2},
		{0x12,0x04},
		{0x8c,0x0},
		{0x4,0x0},
		{0x40,0x10},
		{0x14,0x48},


		{0x4f,0xb3},
		{0x50,0xb3},
		{0x51,0x0},
		{0x52,0x3d},
		{0x53,0xa7},
		{0x54,0xe4},
		{0x3d,0xc0},
		{0x15,0x30},//{0x15,0x20},//{0x15,0x2},

		{0x17,0x13},
		{0x18,0x01},
		{0x32,0xbf},
		{0x19,0x03},
		{0x1a,0x7b},
		{0x03,0x0a},
		{0x0c,0x00},
		{0x3e,0x00},
		{0x70,0x3a},
		{0x71,(0x35)},
		{0x72,0x11},
		{0x73,0xf0},
		{0xa2,0x02},
		{0x11,0x01},




#endif
#ifdef  OV7670_QQVGA_RGB  
//Output format
    {0x12, 0x04},	//VGA(640*480) RGB
    {0x1e, 0x00}, //MVFP: Mirror/VFlip,Normal image

    //configure the ouput timming
    //PCLK does not toggle during horizontal blank, one PCLK, one pixel
    {0x15, 0x20}, 	//COM10
    {0x3c, 0x00},   //COM12,No HREF when VSYNC is low


    //Brightness Control, with signal -128 to +128, 0x00 is middle value
    {0x55, 0x0},

    //Internal clock pre-scalar,F(internal clock) = F(input clock)/(Bit[5:0]+1)
    {0x11, 0x81},   // Clock Div, Input/(n+1), bit6 set to 1 to diable divider

    //SCALING_PCLK_DIV,
    {0x73, 0xF2},//0: Enable clock divider,010: Divided by 4
    //Common Control 14,Bit[4]: DCW and scaling PCLK enable,Bit[3]: Manual scaling
    {0x3e, 0x1A},
    //Common Control 3,Bit[2]: DCW enable,   Bit[3]: Scale enable
    //  {0x0c, 0x00},
    {0x0c, 0x04},    

    //DBLV,Bit[7:6]: PLL control
    {0x6b, 0x40},//0:Bypass PLL.,40: Input clock x4  , 80: Input clock x6  ,C0: Input clock x8

    //test pattern, useful in some case
    {0x70, 0x3A},
    {0x71, 0x35},

    //DCW Control,
    {0x72, 0x22},

    //Output Drive Capability
    {0x09, 0x00}, //Common Control 2, Output Drive Capability: 1x

    {0xa2, 0x02},

    {0xa5, 0x05},
    {0xab, 0x07},

    {0xaa, 0x94},

    {0x0d, 0x00},
    {0x0f, 0x4b},
    {0x3b, 0x9F},	//Night mode
    {0x3F, 0x04},//Edge Enhancement Adjustment
    {0x4C, 0x00},//De-noise Strength

    {0x92, 0x00},
    {0x93, 0x00},

    //reserved
    {0x16, 0x02},
    {0x21, 0x02},
    {0x22, 0x91},
    {0x29, 0x07},
    {0x35, 0x0b},
    {0x33, 0x0b},
    {0x37, 0x1d},
    {0x38, 0x71},
    {0x39, 0x2a},
    {0x0e, 0x61},
    {0x56, 0x40},
    {0x57, 0x80},
    {0x69, 0x00},
    {0x74, 0x19},

    //display , need retain
    {0x40, 0xD0},//Common Control 15
    {0x3a, 0x0C},//Line Buffer Test Option
    {0x3d, 0x80},//Common Control 13
    {0x67, 0x11},//Manual U Value
    {0x68, 0xFF},//Manual V Value
    //config the output window data, this can be configed later
    {0x17, 0x16},   // HSTART
    {0x18, 0x04},   // HSTOP
    {0x19, 0x02},   // VSTRT
    {0x1a, 0x7a},   // VSTOP
    {0x32, 0x80},   // HREF
    {0x03, 0x0a},   // VREF
    //AGC/AEC - Automatic Gain Control/Automatic exposure Control
    {0x00, 0x00},   // AGC
    {0x07, 0x3F},		//Exposure Value
    {0x10, 0xFF},
    {0x13, 0x66},
    {0x14, 0x21},   // limit the max gain
    {0x24, 0x75},
    {0x25, 0x63},
    {0x26, 0xA5},

    //Automatic white balance control
    {0x43, 0x14},
    {0x44, 0xf0},
    {0x45, 0x34},
    {0x46, 0x58},
    {0x47, 0x28},
    {0x48, 0x3a},

    //Matrix Coefficient
    {0x4f, 0x80},
    {0x50, 0x80},
    {0x51, 0x00},
    {0x52, 0x22},
    {0x53, 0x5e},
    {0x54, 0x80},

    //AWB Control
    {0x59, 0x88},
    {0x5a, 0x88},
    {0x5b, 0x44},
    {0x5c, 0x67},
    {0x5d, 0x49},
    {0x5e, 0x0e},
    {0x6c, 0x0a},
    {0x6d, 0x55},
    {0x6e, 0x11},
    {0x6f, 0x9f},


    //Lens Correction Option
    {0x62, 0x00},
    {0x63, 0x00},
    {0x64, 0x04},
    {0x65, 0x20},
    {0x66, 0x05},
    {0x94, 0x04},//effective only when LCC5[2] is high
    {0x95, 0x08},//effective only when LCC5[2] is high

    //Gamma Curve, needn't config
    {0x7a, 0x20},
    {0x7b, 0x1c},
    {0x7c, 0x28},
    {0x7d, 0x3c},
    {0x7e, 0x55},
    {0x7f, 0x68},
    {0x80, 0x76},
    {0x81, 0x80},
    {0x82, 0x88},
    {0x83, 0x8f},
    {0x84, 0x96},
    {0x85, 0xa3},
    {0x86, 0xaf},
    {0x87, 0xc4},
    {0x88, 0xd7},
    {0x89, 0xe8},

    //Histogram-based AEC/AGC Control
    {0x9f, 0x78},
    {0xa0, 0x68},
    {0x31, 0xff},
    {0xa1, 0x03},
    {0xa6, 0xdf},
    {0xa7, 0xdf},
    {0xa8, 0xf0},
    {0xa9, 0x90},

    //Automatic black Level Compensation
    {0xb0, 0x84},
    {0xb1, 0x0c},
    {0xb2, 0x0e},
    {0xb3, 0x82},
    {0xb8, 0x0a},
#endif
    
#ifdef  OV7670_QVGA_RGB_0  
    //Output format
    {0x12, 0x04},	//VGA(640*480) RGB
    {0x1e, 0x00}, //MVFP: Mirror/VFlip,Normal image

    //configure the ouput timming
    //PCLK does not toggle during horizontal blank, one PCLK, one pixel
    {0x15, 0x20}, 	//COM10
    {0x3c, 0x00},   //COM12,No HREF when VSYNC is low


    //Brightness Control, with signal -128 to +128, 0x00 is middle value
    {0x55, 0x2f},

    //Internal clock pre-scalar,F(internal clock) = F(input clock)/(Bit[5:0]+1)
    {0x11, 0x81},   // Clock Div, Input/(n+1), bit6 set to 1 to diable divider
    
    //SCALING_PCLK_DIV,
    {0x73, 0xF1},//0: Enable clock divider,010: Divided by 4
    //Common Control 14,Bit[4]: DCW and scaling PCLK enable,Bit[3]: Manual scaling
    {0x3e, 0x19},
    //Common Control 3,Bit[2]: DCW enable,   Bit[3]: Scale enable
    {0x0c, 0x04},    

    //DBLV,Bit[7:6]: PLL control
    {0x6b, 0x40},//0:Bypass PLL.,40: Input clock x4  , 80: Input clock x6  ,C0: Input clock x8

    //test pattern, useful in some case
    {0x70, 0x3A},
    {0x71, 0x35},

    //DCW Control,
    {0x72, 0x11},

    //Output Drive Capability
    {0x09, 0x00}, //Common Control 2, Output Drive Capability: 1x
    {0xa2, 0x02},
    {0xa5, 0x05},
    {0xab, 0x07},
    {0xaa, 0x94},

    {0x0d, 0x00},
    {0x0f, 0x4b},
    {0x3b, 0x9F},	//Night mode
    {0x3F, 0x04},//Edge Enhancement Adjustment
    {0x4C, 0x00},//De-noise Strength

    {0x92, 0x00},
    {0x93, 0x00},

    //reserved
    {0x16, 0x02},
    {0x21, 0x02},
    {0x22, 0x91},
    {0x29, 0x07},
    {0x35, 0x0b},
    {0x33, 0x0b},
    {0x37, 0x1d},
    {0x38, 0x71},
    {0x39, 0x2a},
    {0x0e, 0x61},
    {0x56, 0x40},
    {0x57, 0x80},
    {0x69, 0x00},
    {0x74, 0x19},

    //display , need retain
    {0x40, 0xD0},//Common Control 15
    {0x3a, 0x0C},//Line Buffer Test Option
    {0x3d, 0x80},//Common Control 13
    {0x67, 0x11},//Manual U Value
    {0x68, 0xFF},//Manual V Value

    //config the output window data, this can be configed later
    {0x17, 0x15},   // HSTART
    {0x18, 0x03},   // HSTOP
    {0x19, 0x02},   // VSTRT
    {0x1a, 0x7a},   // VSTOP
    {0x32, (unsigned char)((1<<8)|(3<<3)|(3<<0))},   // HREF
    {0x03, (unsigned char)((2<<2)|(2<<0))},   // VREF

    //AGC/AEC - Automatic Gain Control/Automatic exposure Control
    {0x00, 0x00},   // AGC
    {0x07, 0x3F},		//Exposure Value
    {0x10, 0xFF},
    {0x13, 0x66},
    {0x14, 0x21},   // limit the max gain
    {0x24, 0x75},
    {0x25, 0x63},
    {0x26, 0xA5},

    //Automatic white balance control
    {0x43, 0x14},
    {0x44, 0xf0},
    {0x45, 0x34},
    {0x46, 0x58},
    {0x47, 0x28},
    {0x48, 0x3a},

    //Matrix Coefficient
    {0x4f, 0x80},
    {0x50, 0x80},
    {0x51, 0x00},
    {0x52, 0x22},
    {0x53, 0x5e},
    {0x54, 0x80},

    //AWB Control
    {0x59, 0x88},
    {0x5a, 0x88},
    {0x5b, 0x44},
    {0x5c, 0x67},
    {0x5d, 0x49},
    {0x5e, 0x0e},
    {0x6c, 0x0a},
    {0x6d, 0x55},
    {0x6e, 0x11},
    {0x6f, 0x9f},

    //Lens Correction Option
    {0x62, 0x00},
    {0x63, 0x00},
    {0x64, 0x04},
    {0x65, 0x20},
    {0x66, 0x05},
    {0x94, 0x04},//effective only when LCC5[2] is high
    {0x95, 0x08},//effective only when LCC5[2] is high

    //Gamma Curve, needn't config
    {0x7a, 0x20},
    {0x7b, 0x1c},
    {0x7c, 0x28},
    {0x7d, 0x3c},
    {0x7e, 0x55},
    {0x7f, 0x68},
    {0x80, 0x76},
    {0x81, 0x80},
    {0x82, 0x88},
    {0x83, 0x8f},
    {0x84, 0x96},
    {0x85, 0xa3},
    {0x86, 0xaf},
    {0x87, 0xc4},
    {0x88, 0xd7},
    {0x89, 0xe8},

    //Histogram-based AEC/AGC Control
    {0x9f, 0x78},
    {0xa0, 0x68},
    {0x31, 0xff},
    {0xa1, 0x03},
    {0xa6, 0xdf},
    {0xa7, 0xdf},
    {0xa8, 0xf0},
    {0xa9, 0x90},

    //Automatic black Level Compensation
    {0xb0, 0x84},
    {0xb1, 0x0c},
    {0xb2, 0x0e},
    {0xb3, 0x82},
    {0xb8, 0x0a},
#endif        
#ifdef  OV7670_QVGA_RGB_1  //better than OV7670_VGA_RGB_0 configuration
    //Output format
    {0x12, 0x14},	//QVGA(320*240) RGB
//    {0x12, 0x04},	//VGA(640*480) RGB
    {0x1e, 0x30}, //MVFP: Mirror/VFlip,Normal image

    //configure the ouput timming
    //PCLK does not toggle during horizontal blank, one PCLK, one pixel
    {0x15, 0x20}, 	//COM10
    {0x3c, 0x00},   //COM12,No HREF when VSYNC is low
    //Brightness Control, with signal -128 to +128, 0x00 is middle value
    {0x55, 0x2f},

    //Internal clock pre-scalar,F(internal clock) = F(input clock)/(Bit[5:0]+1)
    {0x11, 0x81},   // Clock Div, Input/(n+1), bit6 set to 1 to diable divider

    //SCALING_PCLK_DIV,
    {0x73, 0x00},//0: Enable clock divider,010: Divided by 4
    //Common Control 14,Bit[4]: DCW and scaling PCLK enable,Bit[3]: Manual scaling
    {0x3e, 0x00},

    //DBLV,Bit[7:6]: PLL control
    {0x6b, 0x40},//0:Bypass PLL.,40: Input clock x4  , 80: Input clock x6  ,C0: Input clock x8

    //test pattern, useful in some case
    {0x70, 0},
    {0x71, 0},
    
    //Output Drive Capability
    {0x09, 0x00}, //Common Control 2, Output Drive Capability: 1x
    {0xa2, 0x02},
    {0xa5, 0x05},
    {0xab, 0x07},
    {0xaa, 0x94},

    {0x0c, 0x00},
    {0x0d, 0x00},
    {0x0f, 0x4b},
    {0x3b, 0x9F},	//Night mode
    {0x3F, 0x04},//Edge Enhancement Adjustment
    {0x4C, 0x00},//De-noise Strength

    {0x92, 0x00},
    {0x93, 0x00},

    //reserved
    {0x16, 0x02},
    {0x21, 0x02},
    {0x22, 0x91},
    {0x29, 0x07},
    {0x35, 0x0b},
    {0x33, 0x0b},
    {0x37, 0x1d},
    {0x38, 0x71},
    {0x39, 0x2a},
    {0x0e, 0x61},
    {0x56, 0x40},
    {0x57, 0x80},
    {0x69, 0x00},
    {0x74, 0x19},

    //display , need retain
    {0x40, 0xD0},//Common Control 15
    {0x3a, 0x0C},//Line Buffer Test Option
    {0x3d, 0x80},//Common Control 13
    {0x67, 0x11},//Manual U Value
    {0x68, 0xFF},//Manual V Value
    //config the output window data, this can be configed later
    {0x17, 0x16},   // HSTART
    {0x18, 0x04},   // HSTOP
    {0x19, 0x02},   // VSTRT
    {0x1a, 0x7a},   // VSTOP
    {0x32, 0x80},   // HREF
    {0x03, 0x0a},   // VREF

    //DCW Control,
    {0x72, 0x11},

    //AGC/AEC - Automatic Gain Control/Automatic exposure Control
    {0x00, 0x00},   // AGC
    {0x07, 0x3F},		//Exposure Value
    {0x10, 0xFF},
    {0x13, 0x66},
    {0x14, 0x21},   // limit the max gain
    {0x24, 0x75},
    {0x25, 0x63},
    {0x26, 0xA5},
    //Automatic white balance control
    {0x43, 0x14},
    {0x44, 0xf0},
    {0x45, 0x34},
    {0x46, 0x58},
    {0x47, 0x28},
    {0x48, 0x3a},
    //Matrix Coefficient
    {0x4f, 0x80},
    {0x50, 0x80},
    {0x51, 0x00},
    {0x52, 0x22},
    {0x53, 0x5e},
    {0x54, 0x80},
    //AWB Control
    {0x59, 0x88},
    {0x5a, 0x88},
    {0x5b, 0x44},
    {0x5c, 0x67},
    {0x5d, 0x49},
    {0x5e, 0x0e},
    {0x6c, 0x0a},
    {0x6d, 0x55},
    {0x6e, 0x11},
    {0x6f, 0x9f},
    //Lens Correction Option
    {0x62, 0x00},
    {0x63, 0x00},
    {0x64, 0x04},
    {0x65, 0x20},
    {0x66, 0x05},
    {0x94, 0x04},//effective only when LCC5[2] is high
    {0x95, 0x08},//effective only when LCC5[2] is high
    //Gamma Curve, needn't config
    {0x7a, 0x20},
    {0x7b, 0x1c},
    {0x7c, 0x28},
    {0x7d, 0x3c},
    {0x7e, 0x55},
    {0x7f, 0x68},
    {0x80, 0x76},
    {0x81, 0x80},
    {0x82, 0x88},
    {0x83, 0x8f},
    {0x84, 0x96},
    {0x85, 0xa3},
    {0x86, 0xaf},
    {0x87, 0xc4},
    {0x88, 0xd7},
    {0x89, 0xe8},
    //Histogram-based AEC/AGC Control
    {0x9f, 0x78},
    {0xa0, 0x68},
    {0x31, 0xff},
    {0xa1, 0x03},
    {0xa6, 0xdf},
    {0xa7, 0xdf},
    {0xa8, 0xf0},
    {0xa9, 0x90},
    //Automatic black Level Compensation
    {0xb0, 0x84},
    {0xb1, 0x0c},
    {0xb2, 0x0e},
    {0xb3, 0x82},
    {0xb8, 0x0a},
#endif 
#ifdef  OV7670_VGA_RGB  //better than OV7670_VGA_RGB_0 configuration
    //Output format
    {0x12, 0x04},	//VGA(640*480) RGB
    //{0x1e, 0x30}, //MVFP: Mirror/VFlip,Normal image
    {0x1e, 0x00}, //MVFP: Mirror/VFlip,Normal image

    //configure the ouput timming
    //PCLK does not toggle during horizontal blank, one PCLK, one pixel
    {0x15, 0x20}, 	//COM10
    {0x3c, 0x00},   //COM12,No HREF when VSYNC is low
    //Brightness Control, with signal -128 to +128, 0x00 is middle value
    {0x55, 0x2f},

    //Internal clock pre-scalar,F(internal clock) = F(input clock)/(Bit[5:0]+1)
    {0x11, 0x81},   // Clock Div, Input/(n+1), bit6 set to 1 to diable divider

    //SCALING_PCLK_DIV,
    {0x73, 0x00},//0: Enable clock divider,010: Divided by 4
    //Common Control 14,Bit[4]: DCW and scaling PCLK enable,Bit[3]: Manual scaling
    {0x3e, 0x00},

    //DBLV,Bit[7:6]: PLL control
    {0x6b, 0x40},//0:Bypass PLL.,40: Input clock x4  , 80: Input clock x6  ,C0: Input clock x8

    //test pattern, useful in some case
    {0x70, 0X3A},
    {0x71, 0X35},
    
    //Output Drive Capability
    {0x09, 0x00}, //Common Control 2, Output Drive Capability: 1x
    {0xa2, 0x02},
    {0xa5, 0x05},
    {0xab, 0x07},
    {0xaa, 0x94},

    {0x0c, 0x00},
    {0x0d, 0x00},
    {0x0f, 0x4b},
    {0x3b, 0x9F},	//Night mode
    {0x3F, 0x04},//Edge Enhancement Adjustment
    {0x4C, 0x00},//De-noise Strength

    {0x92, 0x00},
    {0x93, 0x00},

    //reserved
    {0x16, 0x02},
    {0x21, 0x02},
    {0x22, 0x91},
    {0x29, 0x07},
    {0x35, 0x0b},
    {0x33, 0x0b},
    {0x37, 0x1d},
    {0x38, 0x71},
    {0x39, 0x2a},
    {0x0e, 0x61},
    {0x56, 0x40},
    {0x57, 0x80},
    {0x69, 0x00},
    {0x74, 0x19},

    //display , need retain
    {0x40, 0xD0},//Common Control 15
    {0x3a, 0x0C},//Line Buffer Test Option
    {0x3d, 0x80},//Common Control 13
    {0x67, 0x11},//Manual U Value
    {0x68, 0xFF},//Manual V Value
    //config the output window data, this can be configed later
    {0x17, 0x16},   // HSTART,176
    {0x18, 0x04},   // HSTOP,32
    {0x19, 0x02},   // VSTRT
    {0x1a, 0x7a},   // VSTOP
    {0x32, 0x80},   // HREF
    {0x03, 0x0a},   // VREF

    //DCW Control,
    {0x72, 0x11},

    //AGC/AEC - Automatic Gain Control/Automatic exposure Control
    {0x00, 0x00},   // AGC
    {0x07, 0x3F},		//Exposure Value
    {0x10, 0xFF},
    {0x13, 0x66},
    {0x14, 0x21},   // limit the max gain
    {0x24, 0x75},
    {0x25, 0x63},
    {0x26, 0xA5},
    //Automatic white balance control
    {0x43, 0x14},
    {0x44, 0xf0},
    {0x45, 0x34},
    {0x46, 0x58},
    {0x47, 0x28},
    {0x48, 0x3a},
    {0x49, 0x9e},
    //Matrix Coefficient
    {0x4f, 0xc0},
    {0x50, 0xc0},
    {0x51, 0x00},
    {0x52, 0x33},
    {0x53, 0x8d},
    {0x54, 0xc0},
    //AWB Control
    {0x59, 0x88},
    {0x5a, 0x88},
    {0x5b, 0x44},
    {0x5c, 0x67},
    {0x5d, 0x49},
    {0x5e, 0x0e},
    {0x6c, 0x0a},
    {0x6d, 0x55},
    {0x6e, 0x11},
    {0x6f, 0x9f},
    //Lens Correction Option
    {0x62, 0x00},
    {0x63, 0x00},
    {0x64, 0x04},
    {0x65, 0x20},
    {0x66, 0x05},
    {0x94, 0x04},//effective only when LCC5[2] is high
    {0x95, 0x08},//effective only when LCC5[2] is high
    //Gamma Curve, needn't config
    {0x7a, 0x20},
    {0x7b, 0x1c},
    {0x7c, 0x28},
    {0x7d, 0x3c},
    {0x7e, 0x55},
    {0x7f, 0x68},
    {0x80, 0x76},
    {0x81, 0x80},
    {0x82, 0x88},
    {0x83, 0x8f},
    {0x84, 0x96},
    {0x85, 0xa3},
    {0x86, 0xaf},
    {0x87, 0xc4},
    {0x88, 0xd7},
    {0x89, 0xe8},
    //Histogram-based AEC/AGC Control
    {0x9f, 0x78},
    {0xa0, 0x68},
    {0x31, 0xff},
    {0xa1, 0x03},
    {0xa6, 0xdf},
    {0xa7, 0xdf},
    {0xa8, 0xf0},
    {0xa9, 0x90},
    //Automatic black Level Compensation
    {0xb0, 0x84},
    {0xb1, 0x0c},
    {0xb2, 0x0e},
    {0xb3, 0x82},
    {0xb8, 0x0a},
#endif   
};

void Ov7670_Init(void)
{
    lpi2c_master_config_t masterConfig;
    status_t status;

    /*
     * masterConfig.enableMaster = true;
     * masterConfig.baudRate_Bps = 100000U;
     * masterConfig.enableTimeout = false;
     */
    LPI2C_MasterGetDefaultConfig(&masterConfig);

    /* Change the default baudrate configuration */
    masterConfig.baudRate_Hz = CAMERA_I2C_BAUDRATE;

    LP_FLEXCOMM_Init(0, LP_FLEXCOMM_PERIPH_LPI2C);
    /* Initialize the I2C master peripheral */
    LPI2C_MasterInit(CAMERA_I2C, &masterConfig, CLOCK_GetFreq(kCLOCK_Fro12M));  

    lpi2c_master_transfer_t masterXfer;			
    memset(&masterXfer, 0, sizeof(masterXfer));
    
    uint8_t deviceAddress     = 0x0A; //Product ID Number - MSB (read only = 0x76)
    masterXfer.slaveAddress   =	0x21U;
    masterXfer.direction      = kLPI2C_Write;
    masterXfer.subaddress     = 0;
    masterXfer.subaddressSize = 0;
    masterXfer.data           = &deviceAddress;
    masterXfer.dataSize       = 1;
    masterXfer.flags          = kLPI2C_TransferDefaultFlag;		
    status = LPI2C_MasterTransferBlocking(CAMERA_I2C, &masterXfer);		

    if (status != kStatus_Success)
    {
        rt_kprintf("\r\nN10 I2C read id fail.\r\n");
    }  
    
    masterXfer.slaveAddress   = 0x21U;
    masterXfer.direction      = kLPI2C_Read;
    masterXfer.subaddress     = 0;
    masterXfer.subaddressSize = 0;
    masterXfer.data           = g_master_rxBuff;
    masterXfer.dataSize       = 1;
    masterXfer.flags          = kLPI2C_TransferDefaultFlag;
    status = LPI2C_MasterTransferBlocking(CAMERA_I2C, &masterXfer);

    if (status != kStatus_Success)
    {
        rt_kprintf("\r\nN10 I2C read id fail.\r\n");
    }  
   
    rt_kprintf("\r\nManufacturer ID Byte-low = 0x%x(it should be 0x76).\r\n", g_master_rxBuff[0]);    
    
    for(int j=0; j<ARRAY_SIZE(ov7670_init_regtbl); j++){
        masterXfer.slaveAddress   = 0x21U;
        masterXfer.direction      = kLPI2C_Write;
        masterXfer.subaddress     = 0;
        masterXfer.subaddressSize = 0;
        masterXfer.data           = &ov7670_init_regtbl[j][0];
        masterXfer.dataSize       = 2;
        masterXfer.flags          = kLPI2C_TransferDefaultFlag;
        status = LPI2C_MasterTransferBlocking(CAMERA_I2C, &masterXfer);
      
        if (status != kStatus_Success)
        {
          rt_kprintf("\r\nN10 I3C read id fail.\r\n");
        }
      }  
    rt_kprintf("\r\nCamera init successfully\r\n");
}


void hm0360_Init(void)
{
    lpi2c_master_config_t masterConfig;
    status_t status;

    /*
     * masterConfig.enableMaster = true;
     * masterConfig.baudRate_Bps = 100000U;
     * masterConfig.enableTimeout = false;
     */
    LPI2C_MasterGetDefaultConfig(&masterConfig);

    /* Change the default baudrate configuration */
    masterConfig.baudRate_Hz = CAMERA_I2C_BAUDRATE;

    LP_FLEXCOMM_Init(0, LP_FLEXCOMM_PERIPH_LPI2C);
    /* Initialize the I2C master peripheral */
    LPI2C_MasterInit(CAMERA_I2C, &masterConfig, CLOCK_GetFreq(kCLOCK_Fro12M));

    lpi2c_master_transfer_t masterXfer;
    memset(&masterXfer, 0, sizeof(masterXfer));

    uint8_t deviceAddress[2]     = {0x0,0x0}; //Product ID Number - MSB (read only = 0x76)
    masterXfer.slaveAddress   =	0x24U;
    masterXfer.direction      = kLPI2C_Write;
    masterXfer.subaddress     = 0;
    masterXfer.subaddressSize = 0;
    masterXfer.data           = &deviceAddress;
    masterXfer.dataSize       = 2;
    masterXfer.flags          = kLPI2C_TransferDefaultFlag;
    status = LPI2C_MasterTransferBlocking(CAMERA_I2C, &masterXfer);

    if (status != kStatus_Success)
    {
        rt_kprintf("\r\nN10 I2C read id fail.\r\n");
    }

    masterXfer.slaveAddress   = 0x24U;
    masterXfer.direction      = kLPI2C_Read;
    masterXfer.subaddress     = 0;
    masterXfer.subaddressSize = 0;
    masterXfer.data           = g_master_rxBuff;
    masterXfer.dataSize       = 1;
    masterXfer.flags          = kLPI2C_TransferDefaultFlag;
    status = LPI2C_MasterTransferBlocking(CAMERA_I2C, &masterXfer);

    if (status != kStatus_Success)
    {
        rt_kprintf("\r\nN10 I2C read id fail.\r\n");
    }

    rt_kprintf("Manufacturer ID Byte-low = 0x%x(it should be 0x03).\r\n", g_master_rxBuff[0]);

    for(int j=0; j<ARRAY_SIZE(hm0360_init_regtbl); j++){
        masterXfer.slaveAddress   = 0x24U;
        masterXfer.direction      = kLPI2C_Write;
        masterXfer.subaddress     = 0;
        masterXfer.subaddressSize = 0;
        masterXfer.data           = &hm0360_init_regtbl[j][0];
        masterXfer.dataSize       = 3;
        masterXfer.flags          = kLPI2C_TransferDefaultFlag;
        status = LPI2C_MasterTransferBlocking(CAMERA_I2C, &masterXfer);

        if (status != kStatus_Success)
        {
          rt_kprintf("\r\nN10 I2C read id fail.\r\n");
        }
      }
}

